version: '3.7'

x-common: &common
    image: liofal/youtube-dl:1.0.0
    build:
      context: .
      dockerfile: Dockerfile
    env_file: 
        - default.env
    user: 1027:100
    working_dir: /download
    logging:
      driver: json-file
    deploy:
      resources:
        limits:
          memory: 256M
    volumes:
    - /volume1/twitch:/download

services:
 j_alexander_hs:
    <<: *common
    container_name: youtube-dl_j_alexander_hs
    environment:
      - url=https://www.twitch.tv/j_alexander_hs/videos/all

 glory__hs:
    <<: *common
    container_name: youtube-dl_glory__hs
    environment:
      - url=https://www.twitch.tv/glory__hs/videos/all

    